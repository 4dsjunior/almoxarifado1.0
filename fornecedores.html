<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Almoxarifado - Fornecedores</title>
    
    <!-- Bootstrap 5.3.0 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;500;600;700&family=Quicksand:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <!-- Logo -->
        <div class="sidebar-header">
            <div class="logo-container">
                <i class="bi bi-boxes logo-icon"></i>
            </div>
            <h4>Almoxarifado</h4>
        </div>
        
        <!-- Menu Items -->
        <ul class="sidebar-menu">
            <li class="menu-item">
                <a href="index.html">
                    <i class="bi bi-grid"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="produtos.html">
                    <i class="bi bi-box"></i>
                    <span>Produtos</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="movimentacoes.html">
                    <i class="bi bi-arrow-left-right"></i>
                    <span>Movimentações</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="categorias.html">
                    <i class="bi bi-tag"></i>
                    <span>Categorias</span>
                </a>
            </li>
            <li class="menu-item active">
                <a href="fornecedores.html">
                    <i class="bi bi-truck"></i>
                    <span>Fornecedores</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="relatorios.html">
                    <i class="bi bi-file-text"></i>
                    <span>Relatórios</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="configuracoes.html">
                    <i class="bi bi-gear"></i>
                    <span>Configurações</span>
                </a>
            </li>
        </ul>
    </nav>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Topbar -->
        <header class="topbar">
            <button class="btn btn-link menu-toggle d-lg-none" id="menuToggle">
                <i class="bi bi-list"></i>
            </button>
            
            <div class="topbar-right">
                <!-- Notifications -->
                <button class="btn btn-link notification-btn" id="notificationBtn">
                    <i class="bi bi-bell"></i>
                    <span class="badge">3</span>
                </button>
                
                <!-- User Profile -->
                <div class="user-profile dropdown">
                    <div class="user-info" data-bs-toggle="dropdown">
                        <div class="avatar">
                            <i class="bi bi-person"></i>
                        </div>
                        <span class="user-name">João Silva</span>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#"><i class="bi bi-person"></i> Perfil</a></li>
                        <li><a class="dropdown-item" href="#"><i class="bi bi-gear"></i> Configurações</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="login.html"><i class="bi bi-box-arrow-right"></i> Sair</a></li>
                    </ul>
                </div>
            </div>
        </header>
        
        <!-- Page Content -->
        <main class="content">
            <div class="page-header">
                <h1>Fornecedores</h1>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#supplierModal">
                    <i class="bi bi-plus"></i> Novo Fornecedor
                </button>
            </div>

            <!-- Filters -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <input type="text" class="form-control" placeholder="Buscar por nome ou CNPJ..." id="searchSupplier">
                        </div>
                        <div class="col-md-3">
                            <select class="form-select" id="statusFilter">
                                <option value="">Todos os status</option>
                                <option value="ativo">Ativo</option>
                                <option value="inativo">Inativo</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <select class="form-select" id="cityFilter">
                                <option value="">Todas as cidades</option>
                                <option value="sao-paulo">São Paulo</option>
                                <option value="rio-janeiro">Rio de Janeiro</option>
                                <option value="belo-horizonte">Belo Horizonte</option>
                                <option value="curitiba">Curitiba</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-outline-secondary w-100" onclick="clearSupplierFilters()">
                                <i class="bi bi-x"></i> Limpar
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Suppliers Table -->
            <div class="card">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover" id="suppliersTable">
                            <thead>
                                <tr>
                                    <th>Razão Social</th>
                                    <th>CNPJ</th>
                                    <th>Contato</th>
                                    <th>Cidade</th>
                                    <th>Produtos</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div>
                                            <strong>Fornecedor ABC Ltda</strong>
                                            <br>
                                            <small class="text-muted">Industrial Supply Co.</small>
                                        </div>
                                    </td>
                                    <td>12.345.678/0001-90</td>
                                    <td>
                                        <div>
                                            <i class="bi bi-telephone"></i> (11) 1234-5678<br>
                                            <i class="bi bi-envelope"></i> contato@abc.com.br
                                        </div>
                                    </td>
                                    <td>São Paulo - SP</td>
                                    <td><span class="badge bg-info">45 produtos</span></td>
                                    <td><span class="badge bg-success">Ativo</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-primary" title="Editar" onclick="editSupplier('SUP001')">
                                            <i class="bi bi-pencil"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-info" title="Produtos" onclick="viewSupplierProducts('SUP001')">
                                            <i class="bi bi-box"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-warning" title="Histórico" onclick="viewSupplierHistory('SUP001')">
                                            <i class="bi bi-clock-history"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-danger" title="Desativar" onclick="toggleSupplierStatus('SUP001', 'Fornecedor ABC Ltda')">
                                            <i class="bi bi-toggle-off"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div>
                                            <strong>Fornecedor XYZ S/A</strong>
                                            <br>
                                            <small class="text-muted">Tools & Equipment</small>
                                        </div>
                                    </td>
                                    <td>98.765.432/0001-10</td>
                                    <td>
                                        <div>
                                            <i class="bi bi-telephone"></i> (21) 9876-5432<br>
                                            <i class="bi bi-envelope"></i> vendas@xyz.com.br
                                        </div>
                                    </td>
                                    <td>Rio de Janeiro - RJ</td>
                                    <td><span class="badge bg-info">32 produtos</span></td>
                                    <td><span class="badge bg-success">Ativo</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-primary" title="Editar" onclick="editSupplier('SUP002')">
                                            <i class="bi bi-pencil"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-info" title="Produtos" onclick="viewSupplierProducts('SUP002')">
                                            <i class="bi bi-box"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-warning" title="Histórico" onclick="viewSupplierHistory('SUP002')">
                                            <i class="bi bi-clock-history"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-danger" title="Desativar" onclick="toggleSupplierStatus('SUP002', 'Fornecedor XYZ S/A')">
                                            <i class="bi bi-toggle-off"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div>
                                            <strong>Ferramentas & Cia</strong>
                                            <br>
                                            <small class="text-muted">Hardware Store</small>
                                        </div>
                                    </td>
                                    <td>11.222.333/0001-44</td>
                                    <td>
                                        <div>
                                            <i class="bi bi-telephone"></i> (31) 3333-4444<br>
                                            <i class="bi bi-envelope"></i> info@ferramentas.com.br
                                        </div>
                                    </td>
                                    <td>Belo Horizonte - MG</td>
                                    <td><span class="badge bg-info">67 produtos</span></td>
                                    <td><span class="badge bg-success">Ativo</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-primary" title="Editar" onclick="editSupplier('SUP003')">
                                            <i class="bi bi-pencil"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-info" title="Produtos" onclick="viewSupplierProducts('SUP003')">
                                            <i class="bi bi-box"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-warning" title="Histórico" onclick="viewSupplierHistory('SUP003')">
                                            <i class="bi bi-clock-history"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-danger" title="Desativar" onclick="toggleSupplierStatus('SUP003', 'Ferramentas & Cia')">
                                            <i class="bi bi-toggle-off"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div>
                                            <strong>Industrial Supply</strong>
                                            <br>
                                            <small class="text-muted">Industrial Equipment</small>
                                        </div>
                                    </td>
                                    <td>55.666.777/0001-88</td>
                                    <td>
                                        <div>
                                            <i class="bi bi-telephone"></i> (41) 5555-6666<br>
                                            <i class="bi bi-envelope"></i> suprimentos@industrial.com.br
                                        </div>
                                    </td>
                                    <td>Curitiba - PR</td>
                                    <td><span class="badge bg-info">23 produtos</span></td>
                                    <td><span class="badge bg-warning">Inativo</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-primary" title="Editar" onclick="editSupplier('SUP004')">
                                            <i class="bi bi-pencil"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-info" title="Produtos" onclick="viewSupplierProducts('SUP004')">
                                            <i class="bi bi-box"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-warning" title="Histórico" onclick="viewSupplierHistory('SUP004')">
                                            <i class="bi bi-clock-history"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-success" title="Ativar" onclick="toggleSupplierStatus('SUP004', 'Industrial Supply')">
                                            <i class="bi bi-toggle-on"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Supplier Modal -->
    <div class="modal fade" id="supplierModal" tabindex="-1" aria-labelledby="supplierModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="supplierModalLabel">Novo Fornecedor</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="supplierForm">
                        <div class="row">
                            <div class="col-md-8 mb-3">
                                <label for="supplierName" class="form-label">Razão Social *</label>
                                <input type="text" class="form-control" id="supplierName" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="supplierCnpj" class="form-label">CNPJ *</label>
                                <input type="text" class="form-control" id="supplierCnpj" placeholder="00.000.000/0000-00" required>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="supplierFantasy" class="form-label">Nome Fantasia</label>
                                <input type="text" class="form-control" id="supplierFantasy">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="supplierPhone" class="form-label">Telefone *</label>
                                <input type="tel" class="form-control" id="supplierPhone" placeholder="(00) 0000-0000" required>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="supplierEmail" class="form-label">E-mail *</label>
                                <input type="email" class="form-control" id="supplierEmail" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="supplierContact" class="form-label">Pessoa de Contato</label>
                                <input type="text" class="form-control" id="supplierContact">
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-8 mb-3">
                                <label for="supplierAddress" class="form-label">Endereço</label>
                                <input type="text" class="form-control" id="supplierAddress">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="supplierCep" class="form-label">CEP</label>
                                <input type="text" class="form-control" id="supplierCep" placeholder="00000-000">
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="supplierCity" class="form-label">Cidade</label>
                                <input type="text" class="form-control" id="supplierCity">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="supplierState" class="form-label">Estado</label>
                                <select class="form-select" id="supplierState">
                                    <option value="">Selecione...</option>
                                    <option value="SP">São Paulo</option>
                                    <option value="RJ">Rio de Janeiro</option>
                                    <option value="MG">Minas Gerais</option>
                                    <option value="PR">Paraná</option>
                                    <option value="RS">Rio Grande do Sul</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="supplierNotes" class="form-label">Observações</label>
                            <textarea class="form-control" id="supplierNotes" rows="3"></textarea>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="supplierActive" checked>
                            <label class="form-check-label" for="supplierActive">
                                Fornecedor Ativo
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="saveSupplier()">Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container position-fixed bottom-0 end-0 p-3"></div>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>
    <script>
        function clearSupplierFilters() {
            document.getElementById('searchSupplier').value = '';
            document.getElementById('statusFilter').value = '';
            document.getElementById('cityFilter').value = '';
            showToast('Filtros limpos', 'info');
        }

        function editSupplier(supplierId) {
            document.getElementById('supplierModalLabel').textContent = 'Editar Fornecedor';
            showToast('Carregando fornecedor para edição...', 'info');
            const modal = new bootstrap.Modal(document.getElementById('supplierModal'));
            modal.show();
        }

        function viewSupplierProducts(supplierId) {
            showToast('Carregando produtos do fornecedor...', 'info');
            setTimeout(() => {
                window.location.href = `produtos.html?supplier=${supplierId}`;
            }, 1000);
        }

        function viewSupplierHistory(supplierId) {
            showToast('Carregando histórico do fornecedor...', 'info');
            setTimeout(() => {
                window.location.href = `movimentacoes.html?supplier=${supplierId}`;
            }, 1000);
        }

        function toggleSupplierStatus(supplierId, supplierName) {
            const isActive = event.target.classList.contains('btn-outline-success');
            const action = isActive ? 'ativar' : 'desativar';
            
            if (confirm(`Tem certeza que deseja ${action} o fornecedor "${supplierName}"?`)) {
                showToast(`Fornecedor ${isActive ? 'ativado' : 'desativado'} com sucesso!`, 'warning');
            }
        }

        function saveSupplier() {
            const form = document.getElementById('supplierForm');
            const name = document.getElementById('supplierName').value;
            const cnpj = document.getElementById('supplierCnpj').value;
            const email = document.getElementById('supplierEmail').value;
            const phone = document.getElementById('supplierPhone').value;
            
            if (!name.trim() || !cnpj.trim() || !email.trim() || !phone.trim()) {
                showToast('Por favor, preencha todos os campos obrigatórios', 'danger');
                return;
            }
            
            showToast('Salvando fornecedor...', 'info');
            
            setTimeout(() => {
                showToast('Fornecedor salvo com sucesso!', 'success');
                const modal = bootstrap.Modal.getInstance(document.getElementById('supplierModal'));
                modal.hide();
                form.reset();
            }, 1500);
        }
    </script>
</body>
</html>